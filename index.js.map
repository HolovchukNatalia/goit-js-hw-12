{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nlet page = 1;\nlet perPage = 40;\nlet totalPages;\nlet currentQuery ='';\n\nexport { page, totalPages, currentQuery };\n\nexport function resetPagination() {\n  page = 1;\n}\n\nexport function setCurrentQuery(query) {\n  currentQuery = query;\n}\n\nexport function nextPage(){\n  page +=1;\n}\n\nconst API_KEY = '48843638-b89903974de20d086a3125d9e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  try {\n    const response = await axios\n    .get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    })\n    totalPages = Math.ceil(response.data.totalHits / perPage);\n    return response.data.hits\n  } catch(error) {\n      console.error('Error fetching images:', error);\n      return [];\n    };\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n  showCounter: false,\n  animationSlide: true,\n});\n\nexport function renderImages(images) {\n  if (images.length === 0) {\n    iziToast.show({\n      position: 'topRight',\n      backgroundColor: 'red',\n      message:\n        'Sorry, there are no images matching your search query. Please, try again!',\n    });\n    gallery.innerHTML = '';\n    return;\n  }\n  const markupGallery = images\n    .map(\n      img =>\n        `<li class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\" class=\"gallery-link\">\n          <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\"/>\n        </a>\n        <div class=\"gallery-stats\">\n          <p>Likes <span>${img.likes}</span></p>\n          <p>Views <span>${img.views}</span></p>\n          <p>Comments <span>${img.comments}</span></p>\n          <p>Downloads <span>${img.downloads}</span></p>\n        </div>\n      </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML(\"beforeend\", markupGallery);\n\n  lightbox.refresh();\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  fetchImages,\n  resetPagination,\n  setCurrentQuery,\n  currentQuery,\n  nextPage,\n  page,\n  totalPages,\n} from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nloadMoreBtn.style.display ='none';\nconst loaderMore = document.querySelector('.loader-more');\nloaderMore.style.display = 'none';\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const query = input.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      message: 'Please enter a search query',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n    return;\n  }\n\n  loader.style.display = 'block';\n  clearGallery();\n  resetPagination();\n  setCurrentQuery(query);\n  input.value = '';\n  loadMoreBtn.style.display = 'none';\n  \n  try {\n    const images = await fetchImages(query);\n\n    \n      renderImages(images);\n      loader.style.display = 'none';\n\n      if (page < totalPages) {\n        loadMoreBtn.style.display = 'block';\n      }\n    \n  } catch (error) {\n    console.log(error);\n  }\n});\n\n\nloadMoreBtn.addEventListener('click', async (e)=>{\n  e.preventDefault();\n  \n  loadMoreBtn.style.display = 'none';\n  loaderMore.style.display = 'block';\n\n\n  try {\n    nextPage();\n    const postsImg = await fetchImages(currentQuery, page);\n    renderImages(postsImg);\n\n    const galleryItemHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height;\n\n    if (galleryItemHeight) {\n      window.scrollBy({\n        top: 2 * galleryItemHeight,\n        behavior: 'smooth',\n      });\n    }\n    loaderMore.style.display = 'none';\n    if(page >= totalPages) {\n      iziToast.show({\n        position: 'topRight',\n        backgroundColor: 'red',\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.style.display = 'none';\n    } else if (page < totalPages) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error);\n    loader.style.display = 'none'; \n  }\n});"],"names":["page","perPage","totalPages","currentQuery","resetPagination","setCurrentQuery","query","nextPage","API_KEY","BASE_URL","fetchImages","response","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","iziToast","markupGallery","img","form","input","loader","loadMoreBtn","loaderMore","clearGallery","e","postsImg","galleryItemHeight","_a"],"mappings":"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"}